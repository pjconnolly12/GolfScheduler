@page
@using Microsoft.AspNetCore.Mvc.Rendering
@model MyApp.Pages.Entries.CreateModel
@{
  ViewData["Title"] = "Add Entry";
}

<h2>Add Entry</h2>

<form method="post">
  <div class="form-group">
    @if (Model.SelectedRound != null)
    {
      <p class="form-control-plaintext">
        @Model.SelectedRound.Course - @Model.SelectedRound.Date.ToString("dddd, MMM d, yyyy h:mm tt")
      </p>
      <input type="hidden" asp-for="Entry.RoundId" value="@Model.SelectedRound.Id" />
    }
    else
    {
      <p class="text-danger">No round selected.</p>
    }
  </div>

  @if (Model.Entry.Status.Equals("Waitlist", StringComparison.OrdinalIgnoreCase))
  {
    <!-- Hidden field so it posts the value but can't be changed -->
    <input type="hidden" asp-for="Entry.Status" />
    <div class="alert alert-warning mt-3">
      This round is full â€” you are joining the <strong>Waitlist</strong>.
    </div>
  }
  else
  {
    <div class="form-group">
      <label asp-for="Entry.Status">Status (Selecting "Maybe" will allow you to save this spot for 24 hours) </label>
      <select asp-for="Entry.Status" class="form-control">
        <option value="Confirmed">Confirmed</option>
        <option value="Maybe">Maybe</option>
      </select>
    </div>
  }

  @if (!Model.Entry.Status.Equals("Waitlist", StringComparison.OrdinalIgnoreCase))
  {
    <div class="form-group">
      <label asp-for="Entry.Guests">Guests</label>
      <input asp-for="Entry.Guests" type="number" class="form-control" min="0" max="2"
        value="@(Model.Entry.Guests ?? 0)" />
    </div>
  }
  else
  {
    <!-- Guests are not allowed for waitlist -->
    <input type="hidden" asp-for="Entry.Guests" value="0" />
  }

  <button type="submit" class="btn btn-primary mt-3">Add Entry</button>
</form>